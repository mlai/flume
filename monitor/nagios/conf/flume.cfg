define host {
        name                linux-box-remote
        use                 generic-host
        check_period        24x7    
        check_interval        5       
        retry_interval        1       
        max_check_attempts    10
        check_command         check-host-alive
        notification_period   24x7
        notification_interval 30
        notification_options  d,r
        contact_groups        admins  
        register            0
}
define hostgroup{
        hostgroup_name  flume-group
        alias           flume nodes including agent and collectors
        hostgroup_members flume-agent-group,flume-collector-group,flume-master-group
}
define hostgroup{
        hostgroup_name  flume-agent-group
        alias           flume-agent-group
        members         flume-agent1
}
define hostgroup{
        hostgroup_name  flume-collector-group
        alias           flume-collector-group
        members         flume-collector1
}
define hostgroup{
        hostgroup_name  flume-master-group
        alias           flume-master-group
        members         flume-master1
}
define service {
        use                     generic-service
        hostgroup_name          flume-group
        service_description     CPU load
        check_command           check_nrpe!check_load
}
define service {
        use                     generic-service
        service_description     HTTP Flume node 35862
        hostgroup_name          flume-collector-group,flume-agent-group
        check_command           check_flume_http!35862
}
define service {
        use                     generic-service
        service_description     HTTP Flume master 35871
        hostgroup_name          flume-master-group
        check_command           check_flume_http!35871
}
define service {
        use                     generic-service
        hostgroup_name          flume-group
        service_description     PING
        check_command           check_ping!200.0,20%!400.0,40%
}

define service {
        use                     generic-service
        hostgroup_name          flume-master-group
        service_description     Flume master process
        check_command           check_nrpe!check_master_procs
}
define service {
        use                     generic-service
        hostgroup_name          flume-agent-group,flume-collector-group
        service_description     Flume node process
        check_command           check_nrpe!check_node_procs
}
define service {
        use                     generic-service
        hostgroup_name          flume-agent-group
        service_description     Flume agent status
        check_command           check_http_json!35862!agent1!state!ACTIVE
}
define service {
        use                     generic-service
        hostgroup_name          flume-collector-group
        service_description     Flume collector status
        check_command           check_http_json!35862!collector1!state!ACTIVE
}
define command{
        command_name    check_flume_http
        command_line    $USER1$/check_http -H $HOSTADDRESS$ -p $ARG1$ $ARG2$
}
define command{
        command_name    check_http_json
        command_line    $USER1$/check_http_json.rb -u 'http://$HOSTADDRESS$:$ARG1$/node/reports/$ARG2$' -e '$ARG3$' -r '$ARG4$'
}
define host {
        use             linux-box-remote 
        host_name       flume-master1
        alias           flume-master1
        address         ip-10-166-246-46
}
define host {
        use             linux-box-remote
        host_name       flume-collector1
        alias           flume-collector1     
        address         ip-10-166-49-68
}       
define host {
        use             linux-box-remote 
        host_name       flume-agent1
        alias           flume-agent1
        address         ip-10-160-221-219
}

